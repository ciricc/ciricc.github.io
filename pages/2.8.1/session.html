{#title|Easy VK / Node.JS ВКонтакте API | Сессия}
<script>
  window.pageGot = true;
</script>
<h1>Сессия VK</h1>
<p>
  После авторизации пользователя или группы, Easy VK создает для Вас сессию, в которую передает некоторые параметры. Так, например, при авторизации пользователя стандартный вид сессии выглядит таким образом:
</p>
<p>
  Класс: <code class="h"><a href="easyvk.html">easyvk</a>.<a href="main.html#class">class</a>.EasyVKSession</code>
</p>
<p>
  <b>Пользовательская сессия после авторизации</b>
</p>
<pre class="js"><code>EasyVKSession {
  access_token: ...,
  first_name: ..., // Имя
  last_name: ..., // Фамилия
  user_id: ...,
  username: ... // Логин для входа в аккаунт (только для корректной авто-смены сессий)
}
</code></pre>
<p>
  Вы можете использовать эти параметры после авторизации
</p>
<pre class="js"><code>easyvk({
  access_token: "токен_пользователя"
}).then(vk => {
  
  console.log(<a href="session.html">vk.session</a>.user_id);

})</code></pre>
<p>
  Для группы же, будет выглядеть так:
</p>
<p>
  <b>Сессия группы после авторизации</b>
</p>
<pre class="js"><code>EasyVKSession {
  access_token: ...,
  group_name: ..., // Название группы
  screen_name: ..., // URL имя группы
  group_id: ...
}
</code></pre>
<p>
  Как видно, объект сессии для группы и для пользователя один и тот же, но его содержимое в первозданном виде - различное. Это важно понимать.
</p>
<div class="big-quote">
  <p>
    При авторизации Вы можете указать дополнительные параметры, которые хотите сохранить в сессию после авторизации. Так, например, можно сохранить ссылку на аватарку <code class="h">photo_200</code> пользователя, чтобы дальше использовать ее в своей программе без дополнительных обращений к API ВКонтакте. Для того, чтобы это сделать, воспользуйтесь параметром <a href="easyvk.html#auth_fields_param">fields[]</a>
  </p>
</div>
<p>
  Ниже описаны методы объекта <code class="h">EasyVKSession</code>
</p>
<h2 id="save">session.save()</h2>
<p>
  Метод сохраняет сессию в <a href="#setPath">указанный файл</a>.
</p>
<pre class="js"><code>vk.save().then(() => {
  console.log('Сессия сохранена успешно!');
})</code></pre>
<h2 id="setPath">session.setPath()</h2>
<p>
  Метод устанавливает путь к файлу сессии, тут происходит указание файла. <br>
  Я не рекомендую менять свойство <code class="h">path</code> для установки пути к файлу, так как Вы можете упустить некоторые внутренние моменты синхронизации Easy VK. 
</p>
<pre class="js"><code>const path = require('path')
const sessionPath = path.join(__dirname, '.current-session')


vk.session.setPath(sessionPath)
.then(({vk: EasyVK}) => {

  console.log(EasyVK.session.path) // Путь к файлу сессии

})</code></pre>
<h2 id="clear">session.clear()</h2>
<p>
  Метод отчищает сессию и сохраняет ее в файл
</p>
<pre class="js"><code>vk.session.data = []
vk.session.clear(() => {
  console.log(vk.session) // {data: undefined}
})</code></pre>
<h2 id="usage">Метод использования</h2>
<p>
  Вы можете использовать сессию не только для того, чтобы сохранять данные пользователя на время, но и, чтобы меняться этими данными между программами. Поскольку я использую Easy VK всегда, когда пишу приложения API ВКонтакте под Node.js, я сталкивался с ситуациями, когда сессию надо было менять в одной программе сразу несколько раз, таким образом я сохранял работоспособность одной программы, не перезапуская постоянно алгоритм авторизации. Кроме того, в Easy VK изначально сессия предназначена для того, чтобы не авторизовать по логину и паролю много раз, а сделать это единожды.
</p>