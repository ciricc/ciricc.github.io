{#title|Easy VK / Node.JS ВКонтакте API | Примеры работы}
<script>
	window.pageGot = true;
</script>
<h1>Примеры</h1>

<p>
	Прежде чем начать работу с Easy VK, познакомьтесь с ним на примерах, так будет проще понять, что он из себя представляет. Я постараюсь объяснить абсолютно все.
</p>
<h2 id="bot_game"><span>#</span> Чат-бот игра "Виселица"</h2>
<p>
  Когда-то давно я писал игру "Виселица" в виде игры-бота, этот пример доступен, его можно скачать и воспользоваться бесплатно. Если возникнут вопросы, или Вы захотите попросить меня его запустить, пишите.
</p>
<p>
  <img src="https://pp.userapi.com/c851324/v851324290/5995d/WVSOaN1Vaok.jpg" alt="Easy VK пример чат-бота игра виселица" width="320" style="max-width: 100%;">
</p>
<p>
  <b>СКАЧАТЬ: </b> <span><a href="https://vk.com/npm_easyvk?w=wall-162208999_131" target="_blank">vk.com/npm_easyvk?w=wall-162208999_131</a></span>
</p>
<h2 id="stories_bot"><span>#</span> Бот который смотрит истории</h2>
<p>
  Если у Вас появилась идея смотреть истории пользователей со своего аккаунта с помощью бота, но Вы не знаете, что для этого нужно, я коротко Вам отвечу: Вам нужен Easy VK! О том, зачем вообще может понадобится бот, который смотрит сторис, я писал в этой статье (<a href="https://pikabu.ru/story/o_tom_kak_ya_ispolzoval_prosmotryi_storis_dlya_piara_v_vk_6123084" target="_blank">О том, как я использовал просмотры сторис для пиара в ВК.</a>). А вот, что из этого получилось, Вы можете видеть на картинках ниже.
</p>
<p>
  <img src="https://cs11.pikabu.ru/post_img/2018/08/29/11/153556746211558763.png" alt="Прирост популярности диаграмма Easy VK">
</p>
<p>
  <b>СКАЧАТЬ и установить (гайд)</b>: <a href="https://vk.com/npm_easyvk?w=wall-162208999_207%2Fall" target="_blank">vk.com/npm_easyvk?w=wall-162208999_207</a>
</p>
<h2 id="send_message"><span>#</span> Отправка сообщения</h2>
<p>
	В этом примере показано, как работает Easy VK в целом, на самом простом примере - отправке сообщения самому себе, многие моменты можно опустить, и оставить только самую важную часть
</p>
<pre class="js"><code>const easyvk = require('easyvk')

easyvk({
    // воспользуйтесь password и username, чтобы получить токен
    // автоматически
    token: "{ТОКЕН_ПОЛЬЗОВАТЕЛЯ}",
}).then(async (vk) => { 
    // после авторизации вы получаете объект EasyVK (vk), с которым работаете дальше
			
    // user_id авторизованного аккаунта (по токену)
    const me = vk.session.user_id

    // Обращаемся к методу messages.send с параметром user_id и message
    vk.call('messages.send', {
        user_id: me,
        message: 'Привет!', // Текст сообщения, по мануалу ВКонтакте
        random_id: easyvk.randomId()
    }).then((response) => {

        // После выполнения запроса, ВКонтакте возвращает ответ
        console.log(response)

        // Получить полный ответ, а не только его часть response
        console.log(response.getFullResponse()) 
    }).catch((error) => {
        
        // Если произойдет ошибка при отправке запроса, она выводится в консоль
        console.log(error);

    });

}).catch(console.error)</code></pre>

<h2 id="chat_bot"><span>#</span> Чат-бот</h2>
<p>
	Теперь Вы, уже зная, как работать с методами, можете понять, как работает иерархия объектов в EasyVK. Посмотрите, как можно создать простейший чат-бот
</p>
<p>
	Данный пример показывает работу только для пользовательского LongPoll, чтобы прослушивать группы и создавать чат-бота группы, используйте Bots LongPoll API
</p>

<pre class="js"><code>const easyvk = require('easyvk')


easyvk({
  token: '{ТОКЕН_ПОЛЬЗОВАТЕЛЯ}'
}).then(vk => {
	
  async function getMessage (msgArray = []) {
    const MESSAGE_ID__INDEX = 1;
	
    return vk.call('messages.getById', {
      message_ids: msgArray[MESSAGE_ID__INDEX]
    })
  }

  // Подключаемся к серверу для "прослушивания" пользователя
  vk.longpoll.connect().then((connection) => {
    
    // Слушаем сообщения пользователя
    connection.on('message', async (msg) => {      
      
      // сообщение для User LongPoll хранится в массиве
      let fullMessage = await getMessage(msg);


      fullMessage = fullMessage.items[0]

      if (!fullMessage.out) { // если это не наше сообщение
	    
	      vk.call('messages.send', {
	        user_id: fullMessage.user_id,
	        message: 'Привет!',
          random_id: easyvk.randomId()
	      });

      }

    })

  })

})

</code></pre>